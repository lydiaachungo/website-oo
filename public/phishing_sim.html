<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sign in to your account | CloudSecure Enterprise</title>
<link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;600&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    :root {
        --brand-blue: #0067b8;
        --error-red: #d93025;
        --matrix-green: #00ff41;
        --warning-yellow: #ffb900;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }

    body {
        background: url('https://images.unsplash.com/photo-1497366216548-37526070297c?q=80&w=2301&auto=format&fit=crop');
        background-size: cover;
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
    }

    /* --- STAGE 1 & 2: LOGIN & 2FA CARD --- */
    .login-wrapper {
        background: #fff;
        width: 440px;
        padding: 44px;
        box-shadow: 0 5px 30px rgba(0,0,0,0.3);
        position: relative;
        z-index: 10;
        transition: 0.3s;
    }

    .logo { margin-bottom: 20px; font-weight: 600; font-size: 1.1rem; color: #5f6368; display: flex; align-items: center; gap: 10px; }
    .logo-icon { width: 24px; height: 24px; background: var(--brand-blue); color: white; display: grid; place-items: center; font-size: 0.9rem; }

    h1 { font-size: 1.5rem; color: #1b1b1b; margin-bottom: 5px; font-weight: 600; }
    .subtitle { font-size: 1rem; color: #1b1b1b; margin-bottom: 25px; }

    input {
        width: 100%; padding: 10px 12px; border: 1px solid #8f8f8f; margin-bottom: 15px;
        font-size: 1rem; outline: none; border-bottom-width: 1px;
    }
    input:focus { border-color: var(--brand-blue); border-bottom-width: 2px; }

    .btn {
        width: 100%; padding: 8px; background: var(--brand-blue); color: white;
        border: none; font-size: 1rem; font-weight: 600; cursor: pointer;
        margin-top: 10px; text-align: right; padding-right: 20px; display: inline-block; width: auto; float: right;
        min-width: 100px;
    }
    .btn:hover { background: #005da6; }

    /* 2FA STYLING */
    .mfa-icon { color: var(--brand-blue); font-size: 3rem; margin-bottom: 15px; display: block; }
    #stage-2 { display: none; }

    /* --- STAGE 3: THE FORENSIC DASHBOARD --- */
    #forensic-overlay {
        display: none;
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: #0d1117;
        z-index: 999;
        color: #fff;
        padding: 40px;
        font-family: 'Courier Prime', monospace;
        overflow-y: auto;
    }

    .dashboard-grid {
        display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px;
        max-width: 1200px; margin: 0 auto;
    }

    .panel {
        background: #161b22; border: 1px solid #30363d;
        padding: 20px; border-radius: 6px;
    }

    .alert-banner {
        grid-column: span 3;
        background: rgba(217, 48, 37, 0.15);
        border-left: 5px solid var(--error-red);
        padding: 20px;
        display: flex; align-items: center; gap: 20px;
        margin-bottom: 20px;
    }
    .alert-banner i { font-size: 2.5rem; color: var(--error-red); }
    .alert-banner h2 { font-family: 'Courier Prime', monospace; color: var(--error-red); font-size: 1.8rem; margin: 0; }

    .data-row {
        display: flex; justify-content: space-between; border-bottom: 1px dashed #30363d;
        padding: 10px 0; font-family: 'Courier Prime', monospace; font-size: 0.8rem;
    }
    .data-label { color: #8b949e; }
    .data-val { color: var(--matrix-green); text-align: right; }

    /* Fake Map */
    .map-placeholder {
        width: 100%; height: 150px; background: #0d1117;
        border: 1px dashed #30363d; display: grid; place-items: center;
        color: #30363d; font-size: 0.8rem; margin-top: 15px;
        position: relative; overflow: hidden;
    }
    .map-dot {
        width: 8px; height: 8px; background: var(--error-red);
        border-radius: 50%; position: absolute;
        box-shadow: 0 0 10px var(--error-red);
        animation: pulse 1.5s infinite;
    }
    @keyframes pulse { 0% {opacity: 1; transform: scale(1);} 100% {opacity: 0; transform: scale(3);} }

    .return-btn {
        grid-column: span 3;
        display: block; width: 100%; text-align: center;
        margin-top: 20px; padding: 15px; border: 1px solid var(--matrix-green);
        color: var(--matrix-green); text-decoration: none;
        font-family: 'Courier Prime', monospace; transition: 0.3s;
    }
    .return-btn:hover { background: var(--matrix-green); color: black; }

</style>
</head>
<body>

<div class="login-wrapper" id="stage-1">
    <div class="logo"><div class="logo-icon">C</div> CloudSecure ID</div>
    <h1>Sign in</h1>
    <p class="subtitle">to access Corporate Intranet</p>
    
    <form onsubmit="goToStage2(event)">
        <input type="email" id="email" placeholder="Email, phone, or Skype" required>
        <input type="password" id="password" placeholder="Password" required>
        <div style="font-size: 0.85rem; color: var(--brand-blue); margin-top:10px;">No account? <a href="#">Create one!</a></div>
        <button type="submit" class="btn">Next</button>
    </form>
</div>

<div class="login-wrapper" id="stage-2">
    <div class="logo"><div class="logo-icon">C</div> CloudSecure ID</div>
    <i class="fas fa-mobile-alt mfa-icon"></i>
    <h1>Verify your identity</h1>
    <p class="subtitle">Enter the code sent to your device ending in **89</p>
    
    <form onsubmit="triggerTrap(event)">
        <input type="text" id="mfa-code" placeholder="Enter code" style="letter-spacing: 5px; font-weight: bold; text-align: center;" required maxlength="6">
        <div style="font-size: 0.85rem; color: var(--brand-blue);">Didn't receive a code?</div>
        <button type="submit" class="btn">Verify</button>
    </form>
</div>

<div id="forensic-overlay">
    <div class="alert-banner">
        <i class="fas fa-radiation"></i>
        <div>
            <h2>ATTACK CHAIN COMPLETED</h2>
            <p>MFA Bypass Technique Detected (AiTM Phishing)</p>
        </div>
    </div>

    <div class="dashboard-grid">
        
        <div class="panel">
            <h3 style="color: #fff; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 5px;">[1] CREDENTIALS</h3>
            <div class="data-row"><span class="data-label">EMAIL</span><span class="data-val" id="captured-email">---</span></div>
            <div class="data-row"><span class="data-label">PASSWORD</span><span class="data-val" id="captured-pass">---</span></div>
            <div class="data-row"><span class="data-label">2FA_CODE</span><span class="data-val" id="captured-token" style="color:var(--error-red)">---</span></div>
        </div>

        <div class="panel">
            <h3 style="color: #fff; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 5px;">[2] SESSION METADATA</h3>
            <div class="data-row"><span class="data-label">BROWSER</span><span class="data-val" id="meta-browser">Chrome/120</span></div>
            <div class="data-row"><span class="data-label">OS</span><span class="data-val" id="meta-os">Windows 10</span></div>
            <div class="data-row"><span class="data-label">TIME</span><span class="data-val" id="meta-time">12:00:00</span></div>
            <div class="data-row"><span class="data-label">CORES</span><span class="data-val" id="meta-cores">8</span></div>
        </div>

        <div class="panel">
            <h3 style="color: #fff; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 5px;">[3] THREAT ACTOR</h3>
            <div class="map-placeholder">
                [ PROXY CHAIN ACTIVE ]
                <div class="map-dot" style="top: 40%; left: 70%;"></div>
                <div class="map-dot" style="top: 30%; left: 20%;"></div>
            </div>
            <div style="margin-top: 10px; font-size: 0.8rem; color: #8b949e;">
                > TOOL: Evilginx2<br>
                > SERVER: nginx/1.18<br>
                > STATUS: <span style="color: var(--error-red)">CONNECTED</span>
            </div>
        </div>

        <div class="panel" style="grid-column: span 3;">
            <h3 style="color: var(--warning-yellow);">FORENSIC BREAKDOWN</h3>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 4px;">
                    <strong style="color: #fff;">1. Device Fingerprinting</strong>
                    <p style="font-size: 0.9rem; color: #ccc; margin-top: 5px;">
                        Notice Panel [2]. We didn't just take your password; we identified your Browser and OS. Attackers use this to craft specific malware payloads for your device.
                    </p>
                </div>
                <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 4px;">
                    <strong style="color: #fff;">2. Session Hijacking</strong>
                    <p style="font-size: 0.9rem; color: #ccc; margin-top: 5px;">
                        By capturing the 2FA code in real-time, the attacker logs into the *real* site immediately, stealing your active Session Cookie. Changing your password later won't stop them.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <a href="index.html" class="return-btn">RETURN TO SAFETY</a>
</div>

<script>
    let userEmail = "";
    let userPass = "";

    function getOS() {
        let userAgent = window.navigator.userAgent, platform = window.navigator.platform, macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'], windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'], iosPlatforms = ['iPhone', 'iPad', 'iPod'], os = null;
        if (macosPlatforms.indexOf(platform) !== -1) { os = 'macOS'; } else if (iosPlatforms.indexOf(platform) !== -1) { os = 'iOS'; } else if (windowsPlatforms.indexOf(platform) !== -1) { os = 'Windows'; } else if (/Android/.test(userAgent)) { os = 'Android'; } else if (!os && /Linux/.test(platform)) { os = 'Linux'; }
        return os || "Unknown OS";
    }

    function goToStage2(event) {
        event.preventDefault();
        userEmail = document.getElementById('email').value;
        userPass = document.getElementById('password').value;
        const btn = document.querySelector('#stage-1 .btn');
        btn.innerText = "Verifying...";
        setTimeout(() => {
            document.getElementById('stage-1').style.display = 'none';
            document.getElementById('stage-2').style.display = 'block';
        }, 1000);
    }

    function triggerTrap(event) {
        event.preventDefault();
        const token = document.getElementById('mfa-code').value;
        const btn = document.querySelector('#stage-2 .btn');
        btn.innerText = "Authenticating...";

        setTimeout(() => {
            document.getElementById('stage-2').style.display = 'none';
            document.getElementById('forensic-overlay').style.display = 'block';
            
            // Populate Credentials
            document.getElementById('captured-email').innerText = userEmail;
            document.getElementById('captured-pass').innerText = userPass.replace(/./g, '*');
            document.getElementById('captured-token').innerText = token;

            // Populate Fingerprinting (The New Feature)
            document.getElementById('meta-os').innerText = getOS();
            document.getElementById('meta-browser').innerText = navigator.userAgent.match(/(chrome|safari|firefox|edge)/i)?.[0] || "Unknown";
            document.getElementById('meta-cores').innerText = navigator.hardwareConcurrency || "4";
            document.getElementById('meta-time').innerText = new Date().toLocaleTimeString();

        }, 1500);
    }
</script>

</body>
</html>